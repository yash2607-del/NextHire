# Nixpacks configuration for Railway (monorepo)
# This deploys the backend (Express) from /server and builds the Vite client.

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = [
  "npm install --prefix server",
  "npm install --prefix client"
]

[phases.build]
cmds = [
  "npm run build --prefix client"
]

[start]
cmd = "npm start --prefix server"
